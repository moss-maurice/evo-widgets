# Web-site widgets from Modx Evolution 1.x chunks&snippets

Инструмент позволяет вызвать любой чанк или сниппет Modx Evolution в виде кода для iFrame. При этом можно ограничить возможность вывода белым или черным списком сущностей.

### Установка:

Клонирование проекта:

```sh
composer create-project mmaurice/evo-widgets ./widgets
```

Перейти в каталог проекта:

```sh
cd ./widgets
```

Обновить зависимости composer:

```sh
composer update
```

Создать файл конфигурации:

```sh
copy ./config.php.example ./config.php
```

### Настройка:

Все настройки хранятся в файле config.php. Файл конфигурации содержит следующие узлы:

-   _filter_ - применяемый метод фильтрации. Поддерживаемые значения: `blacklist`|`whitelist`|`none`. В случае выбора метода фильтрации _blacklist_, разрешено использовать все чанки и сниппеты, которые не перечисленны в blacklist. В случае выбора метода фильтрации _whitelist_, запрещено использовать все чанки и сниппеты, которые не перечисленны в whitelist.

-   _blacklist_ - массив имен чанков и сниппетов, которые запрещено использовать.

-   _whitelist_ - массив имен чанков и сниппетов, которые разрешено использовать.

_Примечание_: Для узлов _blacklist_ и _whitelist_ требуется указывать имя сущности с указанием её типа по маске:

```php
'<type>:<name>'
```

Где,

-   <type> - тип сущности. Допустимо использовать: `chunk`|`snippet`.
-   <name> - имя сущности.

Это необходимо для исключения неоднозначности, если в системе будут зарегестрированы чанк и сниппет с одинаковым наименованием.

### Использование:

Использовать модуль крайне легко. Необходимо обратиться к файлу index.php в адресной строке браузера, передав минимум один главный параметр в GET-запросе: name, где необходимо указать имя вызываемой сущности в формате, описанном выше:

```php
'<type>:<name>'
```

Таким образом, ссылка в адресной строке может выглядеть так:

```sh
http://website/widgets/index.php?name=chunk:demo
```

Кроме этого, ряд чанков и сниппетов поддерживают передачу массива параметров при их вызове. Такой функционал так же поддерживается в данном модуле. Если запросить следующий адрес:

```sh
http://website/widgets/index.php?name=snippet:demo&foo=bar
```

Это будет эквивалентно вызову:

```php
{{demo ? &foo=`bar`}}
```
